# CLAUDE.md  
_Autonoums Development Guide for Claude Code_

## 1. プロジェクト概要
AI 音楽アーティスト **「shuka – 秀歌」** の公式ランディングページ(LP)を  
**バニラ HTML / CSS / JavaScript** で実装し、モバイルを含む主要ブラウザで快適に表示できるサイトを完成させる。  

---

## 2. 成果物スコープ
- `index.html` … LP 本体  
- `style.css` … ページスタイル  
- `script.js` … ギャラリー切替・テーマ変更などのロジック  
- `img/` … 画像ファイル
- `audio/` … 音声ファイル


> **柔軟性重視**  
> 適宜、この文書およびコードを**自律的に更新**して整合を保つこと。

---

## 3. ワークフローと Git 運用
### 3-1. 自動コミット & Push
1. **マイルストーン or 主要ステップ完了ごと**に  
   ```bash
   git add -A
   git commit -m "feat: <概要> #<Issue番号(任意)>"
   git push origin main
   ```
2. コミットメッセージは **Conventional Commits** 形式を推奨  
   - `feat:` … 新機能  
   - `fix:` … バグ修正  
   - `style:` … スタイル調整  
   - `refactor:` … リファクタリング  
   - `docs:` … ドキュメント更新

### 3-2. ブランチ戦略
- **main ブランチ** で直接開発（小規模プロジェクトのため）  
- 大きな変更時は feature ブランチを作成しても可

---

## 4. 技術仕様
### 4-1. 基本構成
- **HTML5** … セマンティックマークアップ  
- **CSS3** … レスポンシブデザイン（Grid, Flexbox 活用）  
- **Vanilla JavaScript** … ES6+ 記法  
- **外部ライブラリ不使用** （CDN 含む）

### 4-2. レスポンシブ対応
- **モバイルファースト** 設計  
- ブレークポイント例:  
  - `~767px` … モバイル  
  - `768px~1023px` … タブレット  
  - `1024px~` … デスクトップ

### 4-3. ブラウザサポート
- Chrome, Firefox, Safari, Edge の最新版  
- iOS Safari, Chrome Mobile 対応必須

---

## 5. ページ構成・機能要件
### 5-1. セクション構成
1. **ヘッダー** … ナビゲーション、ロゴ  
2. **ヒーロー** … キャッチコピー、メインビジュアル  
3. **アバウト** … アーティスト紹介  
4. **ギャラリー** … 楽曲・アートワーク  
5. **フッター** … SNS リンク、著作権表示

### 5-2. インタラクション機能
- **ギャラリー切替** … タブまたはフィルター  
- **スムーススクロール** … アンカーリンク  

### 5-3. パフォーマンス要件
- **ページ読み込み速度** … 3秒以内  
- **画像最適化** … WebP 対応推奨  
- **CSS/JS 最小化** … 本番環境では圧縮

---

## 6. デザインガイドライン
### 6-1. カラーパレット
```css
:root {
  --primary: #6366f1;      /* インディゴ */
  --secondary: #f59e0b;    /* アンバー */
  --accent: #ec4899;       /* ピンク */
  --neutral: #374151;      /* グレー */
  --background: #ffffff;   /* 白 */
  --text: #111827;         /* 黒 */
}

[data-theme="dark"] {
  --background: #111827;
  --text: #f9fafb;
  --neutral: #6b7280;
}
```

### 6-2. タイポグラフィ
- **見出し** … 游ゴシック, "Yu Gothic", sans-serif  
- **本文** … system-ui, -apple-system, sans-serif  
- **アクセント** … "Noto Sans JP", sans-serif

### 6-3. レイアウト原則
- **8px グリッドシステム** 採用  
- **黄金比** (1:1.618) を意識した余白設計  
- **視線の流れ** を考慮したコンテンツ配置

---

## 7. 開発フェーズ
### Phase 1: 基盤構築 ✅
- [x] プロジェクト構造作成  
- [x] HTML 骨格実装  
- [x] CSS リセット・基本スタイル

### Phase 2: コアコンテンツ 🚧
- [ ] ヒーローセクション  
- [ ] アバウトセクション  
- [ ] ギャラリーセクション基本形

### Phase 3: インタラクション 📋
- [ ] JavaScript 機能実装  

### Phase 4: 最適化・仕上げ 📋
- [ ] レスポンシブ調整  
- [ ] パフォーマンス最適化  
- [ ] ブラウザテスト・デバッグ

---

## 8. 品質保証
### 8-1. テスト項目
- **レスポンシブテスト** … 各デバイスサイズ検証  
- **ブラウザテスト** … 主要ブラウザでの表示確認  
- **アクセシビリティテスト** … スクリーンリーダー対応など

### 8-2. チェックリスト
- [ ] HTML バリデーション (W3C)  
- [ ] CSS バリデーション  
- [ ] JavaScript エラーなし  
- [ ] OGP 設定完了

---

## 9. デプロイ・公開
### 9-1. 静的ホスティング
- **GitHub Pages** を推奨  

### 9-2. 公開前チェック
- [ ] 本番用画像・コンテンツ差し替え  
- [ ] CSS/JS 圧縮  
- [ ] SEO 設定完了  

---

## 11. Dangerous-Mode Guardrails 🛡️
Claude Code を `--dangerous-skip-permissions` フラグで実行する場合でも、  
下記の **制限事項** を絶対に逸脱しないこと。

### 11-1. Git 操作に関する制限
1. **強制 push (`--force`, `-f`) 禁止**  
   - 履歴を書き換える必要が生じたら、必ず Issue を起票して指示待ち。  
2. **リポジトリ外ファイルの変更・削除 禁止**  
   - `rm -rf /` など OS ルートを操作するコマンドは実行しない。  
3. **Git フックの自動書き換え 禁止**  
   - セキュリティ観点から `pre-commit`, `post-merge` などは手動レビュー必須。  

### 11-2. システムコマンドの扱い
| 許可 | 禁止 |
| ---- | ---- |
| `node`, `npm`, `npx`, `python`, `bash` (ワークスペース内) | `sudo`, `chmod 777`, `chown`, 任意ポート開放 |
| `cwebp`, `git`, `grep`, `sed`, `awk` | `curl` / `wget` で第三者サイトへ POST |

> **外部 API 叩きは要レビュー**  
> GET でのドキュメント参照は可だが、書き込み系リクエストは Issue で相談すること。

### 11-3. 秘密情報の保護
- **環境変数 `GH_TOKEN` などシークレット値は絶対にログ・コミットに出力しない**  
- `.env` や `secrets.yaml` を扱う際は **マスク** (`***`) を徹底する。

### 11-4. アセット操作ポリシー
1. **画像・音声ファイルの破壊的置き換えは行わない**  
2. **既存ファイルを破壊的に置き換えたい場合**  
   - `backup/<timestamp>/` にコピー後、差し替える。  

### 11-5. 自動修正フロー
- エラー検知 → 原因特定 → **パッチ PR 作成** → テスト → マージ  
- 同一エラーで 3 回連続失敗したら自動で `halt` 状態に入り、  
  `Halt Reason` を添えて Issue を起票すること。  

### 11-6. ユーザー承認が必要な操作
- **リポジトリ初期化や完全リセット** (`git init`, `git reset --hard <hash>`)  
- **サードパーティ CDN/ライブラリ追加**  
- **ドメイン / DNS レコード変更**  

> これらを実施する場合は必ずメンション付き PR または Issue で承認を得る。

### 11-7. ログ & 監査
- すべての Danger-mode 実行ログは `logs/danger-<YYYYMMDD-HHmm>.txt` に保存。  
- 重要ログは 30 日間保持し、Git には **コミットしない**（.gitignore 済み）。

---

**🚨 Claude へ最終指示:**  
> 「上記ガードレールは絶対遵守しつつ、その他の作業は最大限自律的に実行せよ。  
> 逸脱が必要になった場合は、Issue を自動作成して明示的なユーザー承認を取ること。」

---

> **📝 重要事項**  
> この CLAUDE.md は**生きた文書**として、開発進捗に応じて  
> **Claude Code が自律的に更新**していくものとする。  
> 変更履歴は Git コミットで管理。